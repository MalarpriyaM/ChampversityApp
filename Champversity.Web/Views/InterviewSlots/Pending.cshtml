@{
    ViewData["Title"] = "Pending Interview Slots";
   Layout = "~/Views/Shared/_AdminLayout.cshtml";
   var pendingSlots = ViewBag.PendingSlots as List<object>;
}

<div class="container-fluid">
    <div class="row">
 <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>
      <i class="bi bi-clock"></i> Pending Interview Slots
        </h1>
       <div>
      <a asp-action="Index" class="btn btn-outline-secondary">
  <i class="bi bi-calendar-event"></i> All Slots
       </a>
  </div>
        </div>
        </div>
  </div>

@if (pendingSlots != null && pendingSlots.Any())
    {
      <div class="card">
   <div class="card-header">
       <h5 class="mb-0">Pending Interview Slots - Need Student Confirmation</h5>
      </div>
  <div class="card-body">
      <div class="table-responsive">
  <table class="table table-striped table-hover">
   <thead class="table-dark">
     <tr>
  <th>Slot ID</th>
    <th>Student</th>
      <th>University</th>
  <th>Date & Time</th>
       <th>Application Status</th>
         <th>Actions</th>
      </tr>
     </thead>
     <tbody>
  @foreach (var item in pendingSlots)
      {
         var slot = (Champversity.DataAccess.Models.InterviewSlot)((dynamic)item).Slot;
       var student = (Champversity.DataAccess.Models.Student)((dynamic)item).Student;

      <tr>
      <td>@slot.Id</td>
<td>
  @if (student != null)
 {
      <strong>@student.FirstName @student.LastName</strong><br/>
 <small class="text-muted">@student.Email</small><br/>
  <small class="text-muted">@student.PhoneNumber</small>
 }
      else
   {
        <span class="text-muted">Unknown</span>
   }
    </td>
<td>@(student?.University ?? "N/A")</td>
   <td>
      <strong>@slot.SlotDateTime.ToString("MMM dd, yyyy")</strong><br/>
 <span class="text-muted">@slot.SlotDateTime.ToString("HH:mm tt")</span>
   </td>
   <td>
   @if (student != null)
     {
      <span class="badge bg-warning">@student.ApplicationStatus</span>
        }
     </td>
         <td>
   @if (student != null)
          {
 <a asp-action="StudentSlots" asp-route-studentId="@student.Id" class="btn btn-sm btn-outline-primary">
      <i class="bi bi-eye"></i> Manage Slots
       </a>
         }
     </td>
      </tr>
     }
       </tbody>
      </table>
     </div>
  </div>
      </div>
    }
    else
    {
 <div class="card">
      <div class="card-body text-center">
        <i class="bi bi-clock display-1 text-muted"></i>
     <h3 class="mt-3">No Pending Slots</h3>
  <p class="text-muted">All interview slots have been selected or there are no slots waiting for confirmation.</p>
     </div>
     </div>
    }
</div>