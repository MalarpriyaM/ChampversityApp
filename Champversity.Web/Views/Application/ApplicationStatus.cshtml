@model Champversity.DataAccess.Models.Student

@{
 ViewData["Title"] = "Application Status";
}

<div class="container">
 <h1 class="mb-4">Application Status</h1>
 
 @if (Model != null)
 {
 <div class="row">
 <div class="col-md-8">
 <div class="card mb-4">
 <div class="card-header">
 <h5 class="mb-0">Application Details</h5>
 </div>
 <div class="card-body">
 <div class="row mb-2">
 <div class="col-md-4"><strong>Reference Number:</strong></div>
 <div class="col-md-8">@Model.Id</div>
 </div>
 <div class="row mb-2">
 <div class="col-md-4"><strong>Name:</strong></div>
 <div class="col-md-8">@Model.FirstName @Model.MiddleName @Model.LastName</div>
 </div>
 <div class="row mb-2">
 <div class="col-md-4"><strong>Email:</strong></div>
 <div class="col-md-8">@Model.Email</div>
 </div>
 <div class="row mb-2">
 <div class="col-md-4"><strong>University:</strong></div>
 <div class="col-md-8">@Model.University</div>
 </div>
 <div class="row mb-2">
 <div class="col-md-4"><strong>Program/Major:</strong></div>
 <div class="col-md-8">@Model.IntendedProgramMajor</div>
 </div>
 <div class="row mb-2">
 <div class="col-md-4"><strong>Submission Date:</strong></div>
 <div class="col-md-8">@Model.ApplicationSubmittedDate.ToString("MMMM dd, yyyy")</div>
 </div>
 </div>
 </div>

 <div class="card mb-4">
 <div class="card-header">
 <h5 class="mb-0">Current Status</h5>
 </div>
 <div class="card-body">
 <div class="row mb-2">
 <div class="col-md-4"><strong>Status:</strong></div>
 <div class="col-md-8">
 <span class="badge bg-primary">@Model.ApplicationStatus</span>
 </div>
 </div>
 
 @if (!string.IsNullOrEmpty(Model.UniversityFileReference))
 {
 <div class="row mb-2">
 <div class="col-md-4"><strong>University File:</strong></div>
 <div class="col-md-8">@Model.UniversityFileReference</div>
 </div>
 }
 
 @if (Model.InterviewSlots != null && Model.InterviewSlots.Any())
 {
 <div class="row mt-4">
 <div class="col-12">
 <h6>Interview Slot Options:</h6>
 <form asp-action="SelectInterviewSlot" method="post">
 <input type="hidden" name="studentId" value="@Model.Id" />
 <ul class="list-group">
 @foreach (var slot in Model.InterviewSlots)
 {
 <li class="list-group-item">
 <div class="form-check">
 <input class="form-check-input" type="radio" name="slotId" 
 id="slot-@slot.Id" value="@slot.Id" 
 @(slot.IsSelected ? "checked" : "") />
 <label class="form-check-label" for="slot-@slot.Id">
 @slot.SlotDateTime.ToString("MMMM dd, yyyy, HH:mm tt")
 </label>
 </div>
 </li>
 }
 </ul>
 <button type="submit" class="btn btn-primary mt-3">Confirm Selected Slot</button>
 </form>
 </div>
 </div>
 }
 </div>
 </div>
 </div>

 <div class="col-md-4">
 <div class="card">
 <div class="card-header">
 <h5 class="mb-0">Application Timeline</h5>
 </div>
 <div class="card-body">
 <ul class="timeline">
 <li class="timeline-item">
 <span class="timeline-point bg-success"></span>
 <h5 class="mb-1">Application Submitted</h5>
 <p class="text-muted mb-0">@Model.ApplicationSubmittedDate.ToString("MMMM dd, yyyy")</p>
 </li>
 
 @if (!string.IsNullOrEmpty(Model.UniversityFileReference))
 {
 <li class="timeline-item">
 <span class="timeline-point bg-primary"></span>
 <h5 class="mb-1">Sent to University</h5>
 <p class="text-muted mb-0">Processing</p>
 </li>
 }
 
 @if (Model.InterviewSlots != null && Model.InterviewSlots.Any())
 {
 <li class="timeline-item">
 <span class="timeline-point bg-info"></span>
 <h5 class="mb-1">Interview Slots Received</h5>
 <p class="text-muted mb-0">Pending selection</p>
 </li>
 }
 
 @if (Model.SelectedSlot != null)
 {
 <li class="timeline-item">
 <span class="timeline-point bg-success"></span>
 <h5 class="mb-1">Interview Confirmed</h5>
 <p class="text-muted mb-0">@Model.SelectedSlot.SlotDateTime.ToString("MMMM dd, yyyy, HH:mm tt")</p>
 </li>
 }
 </ul>
 </div>
 </div>
 
 <div class="card mt-4">
 <div class="card-header">
<h5 class="mb-0">Need Help?</h5>
 </div>
 <div class="card-body">
 <p>If you have any questions about your application, please contact our support team:</p>
 <p><strong>Email:</strong> support@champversity.com</p>
 <p><strong>Phone:</strong> (123)456-7890</p>
 </div>
 </div>
 </div>
 </div>
 }
 else
 {
 <div class="card">
 <div class="card-body">
 <h5 class="card-title">Check Your Application Status</h5>
 <p class="card-text">Enter your application reference number to check your current application status.</p>
 
 <form asp-action="CheckStatus" method="get">
 <div class="mb-3">
 <label for="id" class="form-label">Reference Number</label>
 <input type="number" class="form-control" id="id" name="id" required />
 </div>
 <button type="submit" class="btn btn-primary">Check Status</button>
 </form>
 </div>
 </div>
 }
</div>

<style>
.timeline {
 position: relative;
 list-style: none;
 padding:0;
 margin:0;
}

.timeline-item {
 position: relative;
 padding-left:24px;
 margin-bottom:24px;
}

.timeline-point {
 position: absolute;
 left:0;
 top:4px;
 width:12px;
 height:12px;
 border-radius:50%;
}

.timeline:before {
 content: '';
 position: absolute;
 left:5px;
 top:0;
 bottom:0;
 width:2px;
 background-color: #e9ecef;
}
</style>